# üêæ –ü—Ä–∏—Ç—É–ª–æ–∫ –¥–ª—è –¢–≤–∞—Ä–∏–Ω API

## üìù –û–ø–∏—Å

–¶–µ —Å–µ—Ä–≤–µ—Ä–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–∏—Ç—É–ª–∫–æ–º –¥–ª—è —Ç–≤–∞—Ä–∏–Ω, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º NestJS. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏ –ø—Ä–∏—Ö–∏—Å—Ç–∫—É —Ç–≤–∞—Ä–∏–Ω, —ó—Ö —É—Å–∏–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- üîê –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- üêà –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ä—Ç–∫–∞–º–∏ —Ç–≤–∞—Ä–∏–Ω
- üìã –ü—Ä–æ—Ü–µ—Å —É—Å–∏–Ω–æ–≤–ª–µ–Ω–Ω—è
- üë• –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- üìä Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

## üõ† –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

- **Framework**: NestJS
- **–ú–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è**: TypeScript
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: PostgreSQL
- **ORM**: TypeORM
- **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: JWT + Passport
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: Swagger + Scalar
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: class-validator
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤**: Argon2

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
üìÅ src/
‚îú‚îÄ‚îÄ üìÅ modules/                    # –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ adoption/              # –ú–æ–¥—É–ª—å —É—Å–∏–Ω–æ–≤–ª–µ–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dto/              # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create-adoption.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get-adoptions.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ update-adoption.dto.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ entities/         # –°—É—Ç–Ω–æ—Å—Ç—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adoption.{controller|model|module|service}.ts
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ auth/                 # –ú–æ–¥—É–ª—å –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dto/             # DTO –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.dto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register.dto.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ jwt/             # JWT –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.guard.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ jwt.strategy.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.{controller|model|module|service}.ts
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ pet/                  # –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–≤–∞—Ä–∏–Ω–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dto/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ entities/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pet.{controller|model|module|service}.ts
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ user/                 # –ú–æ–¥—É–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ üìÅ entities/
‚îÇ       ‚îî‚îÄ‚îÄ user.{controller|module|service}.ts
‚îú‚îÄ‚îÄ üìÅ shared/                    # –°–ø—ñ–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ base/                 # –ë–∞–∑–æ–≤—ñ –∫–ª–∞—Å–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.model.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.resolver.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ configs/              # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.config.ts        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.config.ts       # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è JWT
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ swagger.config.ts   # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Swagger
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ utils/                # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ is-dev.ts
‚îÇ       ‚îî‚îÄ‚îÄ swagger.ts
‚îú‚îÄ‚îÄ app.module.ts                 # –ì–æ–ª–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
‚îî‚îÄ‚îÄ main.ts                       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

üìÅ –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ üê≥ Dockerfile                # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Docker
‚îú‚îÄ‚îÄ ‚öôÔ∏è docker-compose.yml        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Docker Compose
‚îú‚îÄ‚îÄ üìÑ .env.example             # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ üìÑ nest-cli.json           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è NestJS CLI
‚îî‚îÄ‚îÄ üìÑ tsconfig.json           # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è TypeScript
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Node.js (–≤–µ—Ä—Å—ñ—è 18 –∞–±–æ –≤–∏—â–µ)
- PostgreSQL
- Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏:

```env
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
NODE_ENV=development
PORT=3000

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–º–µ–Ω—É –¥–ª—è cookies
COOKIE_DOMAIN=localhost

# JWT –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
JWT_SECRET=some-secret
JWT_ACCESS_TOKEN_TTL='1h'
JWT_REFRESH_TOKEN_TTL='7d'

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö PostgreSQL
POSTGRES_DB=pet-shelter
POSTGRES_USER=user
POSTGRES_PASSWORD=123
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Ngrok (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
NGROK_AUTH_TOKEN=token
```

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
yarn install

# –ó–∞–ø—É—Å–∫ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
yarn dev

# –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
yarn build

# –ó–∞–ø—É—Å–∫ —É –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º—ñ
yarn start:prod
```

### Docker

```bash
# –ó–∞–ø—É—Å–∫ –∑ Docker Compose —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–≤–∫–ª—é—á–Ω–æ –∑ URL ngrok —Ç—É–Ω–µ–ª—é)
docker-compose logs -f app

# –©–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ª–∏—à–µ URL ngrok —Ç—É–Ω–µ–ª—é
docker-compose logs app | grep "ngrok tunnel established at"
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞**: –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –≤ —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ, URL ngrok —Ç—É–Ω–µ–ª—é –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. –¶–µ–π URL –±—É–¥–µ –≤–∞—à–æ—é –ø—É–±–ª—ñ—á–Ω–æ—é —Ç–æ—á–∫–æ—é –¥–æ—Å—Ç—É–ø—É –¥–æ API.

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–∞–º–∏:

- Swagger UI: `http://localhost:3000/api`
- Scalar API Reference: `http://localhost:3000/reference`

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –ø—ñ–¥ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é [UNLICENSED].

## üë• –ê–≤—Ç–æ—Ä–∏

–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –¥–æ–ø–æ–º–æ–≥–∏ —Ç–≤–∞—Ä–∏–Ω–∞–º.
